<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <link rel="icon" href="https://i.imgur.com/e4oXN9E.png" type="image/png">
  <title>Ticking Orb</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap');
    body {
      margin: 0;
      font-family: 'Press Start 2P', cursive;
      background: linear-gradient(135deg, #0f0f0f, #1a1a1a);
      color: #00ffcc;
      overflow: hidden;
    }
    #gameCanvas {
      display: block;
      margin: 40px auto;
      background: repeating-linear-gradient(45deg, #000, #000 5px, #111 5px, #111 10px);
      border: 4px solid #00ffcc;
      box-shadow: 0 0 20px #00ffcc;
    }
    #ui {
      position: absolute;
      top: 10px;
      left: 50%;
      transform: translateX(-50%);
      background: #000;
      padding: 10px 30px;
      border: 2px solid #00ffcc;
      border-radius: 10px;
      font-size: 0.7rem;
    }
    #startBtn {
      position: absolute;
      top: 70px;
      left: 50%;
      transform: translateX(-50%);
      padding: 10px 20px;
      font-size: 0.8rem;
      background: #ff0066;
      color: #fff;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      box-shadow: 0 0 10px #ff0066;
    }
    #popup {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: #000;
      color: #ff0066;
      border: 2px solid #ff0066;
      padding: 30px;
      font-size: 1rem;
      border-radius: 10px;
      box-shadow: 0 0 20px #ff0066;
      display: none;
      text-align: center;
      z-index: 999;
    }
  </style>
</head>
<body>
  <div id="ui">
    <div>üèÜ Score: <span id="score">0</span>‚ÄÉ‚è± Time: <span id="time">10.0</span>s</div>
    <div id="powerMsg" style="color:#ff0; margin-top:5px;"></div>
  </div>
  <button id="startBtn" onclick="startGame()">üïπÔ∏è START</button>
  <canvas id="gameCanvas" width="400" height="400"></canvas>
  <div id="popup"></div>

  <script>
    const canvas = document.getElementById('gameCanvas');
    const ctx = canvas.getContext('2d');
    const scoreDisplay = document.getElementById('score');
    const timeDisplay = document.getElementById('time');
    const powerMsg = document.getElementById('powerMsg');
    const startBtn = document.getElementById('startBtn');
    const popup = document.getElementById('popup');

    let x = 180, y = 180, targetX, targetY;
    let score = 0, timeLeft = 10.0, powerMode = false, powerTimer = 0;
    let keys = {}, gameRunning = false;

    function randomTarget() {
      targetX = Math.floor(Math.random() * 360);
      targetY = Math.floor(Math.random() * 360);
    }

    function draw() {
      ctx.clearRect(0, 0, 400, 400);
      ctx.fillStyle = '#ff0066';
      ctx.beginPath();
      ctx.arc(targetX + 20, targetY + 20, 15, 0, Math.PI * 2);
      ctx.fill();
      ctx.fillStyle = powerMode ? '#ffff00' : '#00ffcc';
      ctx.fillRect(x, y, 40, 40);
    }

    function movePlayer() {
      const speed = powerMode ? 4 : 2;
      if (keys['ArrowUp'] || keys['w']) y = Math.max(0, y - speed);
      if (keys['ArrowDown'] || keys['s']) y = Math.min(360, y + speed);
      if (keys['ArrowLeft'] || keys['a']) x = Math.max(0, x - speed);
      if (keys['ArrowRight'] || keys['d']) x = Math.min(360, x + speed);
    }

    function checkCollision() {
      const dx = x + 20 - (targetX + 20);
      const dy = y + 20 - (targetY + 20);
      const distance = Math.sqrt(dx * dx + dy * dy);
      if (distance < 40) {
        score++;
        scoreDisplay.textContent = score;
        randomTarget();
        timeLeft = Math.min(timeLeft + 2.5, 3.5);
        timeDisplay.textContent = timeLeft.toFixed(1);
        if (Math.random() < 0.25) {
          powerMode = true;
          powerTimer = 5;
          powerMsg.textContent = 'üí• Power Mode Activated!';
        }
      }
    }

    function updatePowerMode() {
      if (powerMode) {
        powerTimer--;
        if (powerTimer <= 0) {
          powerMode = false;
          powerMsg.textContent = '';
        }
      }
    }

    function endGame() {
      gameRunning = false;
      popup.innerHTML = `<h2>üéâ Game Over!</h2><p>Final Score: ${score}</p>`;
      popup.style.display = 'block';
      startBtn.style.display = 'block';
    }

    function startGame() {
      gameRunning = true;
      score = 0;
      timeLeft = 10.0;
      powerMode = false;
      scoreDisplay.textContent = score;
      timeDisplay.textContent = timeLeft.toFixed(1);
      powerMsg.textContent = '';
      x = 180; y = 180;
      randomTarget();
      startBtn.style.display = 'none';
      popup.style.display = 'none';
      document.addEventListener('keydown', e => keys[e.key.toLowerCase()] = true);
      document.addEventListener('keyup', e => keys[e.key.toLowerCase()] = false);

      const loop = setInterval(() => {
        if (!gameRunning) return;
        movePlayer();
        checkCollision();
        draw();
      }, 20);

      const timer = setInterval(() => {
        if (!gameRunning) return;
        timeLeft -= 0.2;
        updatePowerMode();
        timeDisplay.textContent = Math.max(0, timeLeft).toFixed(1);
        if (timeLeft <= 0) {
          clearInterval(loop);
          clearInterval(timer);
          endGame();
        }
      }, 200);
    }
  </script>
</body>
</html>